---
layout: post
title: Retrieving a WebPage Title and Sharing it with the ShareLinkTask in WP7
excerpt: 
tags: 
comments: true
---

<p><a href="http://michaelcrump.net/files/image_634615247341626063.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://michaelcrump.net/files/image_thumb_634615247396851125.png" width="405" height="255" /></a></p>  <p>&#160;</p>  <h3>Introduction</h3>  <p>The <a href="http://msdn.microsoft.com/en-us/library/hh394009(v=vs.92).aspx">ShareLinkTask</a> introduced in Windows Phone SDK 7.1 enables users to share a link on various social networks like Twitter Facebook and LinkedIn. The only thing that I wish that it had was a way to grab the page title for the link before posting. I found myself typing the page title and thought I’d write some simple code and share with everyone. Below is a snapshot of a post to Facebook that automatically added the page title to the post. </p>  <p><a href="http://michaelcrump.net/files/image_634615247403403251.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://michaelcrump.net/files/image_thumb_634615247414635467.png" width="502" height="128" /></a></p>  <h3>ShareLinkTask Intro</h3>  <p>The following code is all you need to share links on Social Media Networks with WP SDK 7.1.</p>  <pre class="brush: csharp;">ShareLinkTask shareLinkTask = new ShareLinkTask();    shareLinkTask.Title = &quot;Telerik&quot;;  shareLinkTask.LinkUri = new Uri(&quot;http://www.telerik.com&quot; UriKind.Absolute);  shareLinkTask.Message = &quot;Here are some great controls for Windows Phone 7.&quot;;    shareLinkTask.Show();</pre>    <p>It will pop up a list of all the Social Media accounts that the user has registered on their device and after you select it then it will post automatically. </p>    <p>Instead of hard coding the title or message we can add in the following code in and get the page title automatically. </p>    <pre class="brush: csharp;">WebClient wc = new WebClient();  wc.DownloadStringAsync(new Uri(&quot;http://www.telerik.com&quot; UriKind.RelativeOrAbsolute));  wc.DownloadStringCompleted += (s ev) =&gt;  {      strTitle = Regex.Match(ev.Result @&quot;\&lt;title\b[^&gt;]*\&gt;\s*(?&lt;Title&gt;[\s\S]*?)\&lt;/title\&gt;&quot; RegexOptions.IgnoreCase).Groups[&quot;Title&quot;].Value;  };  <br /></pre>    <h3>Wrap-up</h3>    <p>Thanks for the help Regex! This was fairly painless process that only took a few minutes! If this post helped you or you know a better way then I’d love to hear from you in the comments below.</p>
