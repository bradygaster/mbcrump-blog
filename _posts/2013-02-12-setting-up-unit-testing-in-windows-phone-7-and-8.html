---
layout: post
title: Setting up Unit Testing in Windows Phone 7 and 8
excerpt: 
tags: 
comments: true
---

<h3>Introduction</h3>  <p>After reading the comments on <a href="http://channel9.msdn.com/Events/Build/2012/3-045">this video</a> and in forums there seems to be a lot of confusion about how to setup “Unit Testing” in Windows Phone 7 and 8. It is actually very easy and I’ll show you step-by-step how to setup your first unit test in Windows Phone 7 or 8. </p>  <h3>Let’s Get Started</h3>  <p>Before we get started the <a href="http://blogs.msdn.com/b/visualstudioalm/archive/2013/01/31/windows-phone-unit-tests-in-visual-studio-2012-update-2.aspx">Visual Studio 2012 Update 2 CTP 2</a> includes a project template for Unit Testing. The only downside is that this applies to WP8 only. The template will not show if you do not have the 8.0 SDK installed.</p>  <p>If you already have a Windows Phone 7 or 8 project that you want to Unit Test then all you need to do is to create another Windows Phone 7 or 8 Project in the same solution as shown below. This project can be the standard “Windows Phone App” template. You may want to give it a meaningful name such as UnitTestWP8App etc. </p>  <p><a href="http://michaelcrump.net/files/image_634961831916021398.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://michaelcrump.net/files/image_thumb_634961831928035323.png" width="276" height="342" /></a></p>  <p>Right click on the Unit Test WP8 App and select “Manage Nuget Packages”; now do a search for wptoolkit as shown below. </p>  <p><a href="http://michaelcrump.net/files/image_634961831937552848.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://michaelcrump.net/files/image_thumb_634961831959084298.png" width="613" height="291" /></a></p>  <p>You’re going to want to install the Windows Phone toolkit and Windows Phone Toolkit Test Framework. Once that is complete you will have the necessary files to Unit Test your WP8 projects. Not much has changed except a few new references and images have been added for you. </p>  <p>Navigate over to the MainPage.xaml.cs file and add in the following:</p>  <pre class="brush: csharp;">// Constructor  public MainPage()  {      InitializeComponent();      this.Content = UnitTestSystem.CreateTestPage();             }   </pre>    <p>You will need to fix your using Statements as this uses: Microsoft.Phone.Testing.</p>    <p>If you set this project as your start-up project and deploy it to the emulator then you will get the following screen: </p>    <p><a href="http://michaelcrump.net/files/1_634961831966261448.png"><img title="1" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="1" src="http://michaelcrump.net/files/1_thumb_634961831971254248.png" width="255" height="423" /></a></p>    <p>If we hit the play button then we will find that we have no tests to run. </p>    <p><a href="http://michaelcrump.net/files/2_634961831979055498.png"><img title="2" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="2" src="http://michaelcrump.net/files/2_thumb_634961831983892273.png" width="254" height="420" /></a></p>    <p>Let’s go ahead and add a reference to our real WP8 application by right clicking references and browsing to solution then projects as shown below. </p>    <p><a href="http://michaelcrump.net/files/image_634961831988416998.png"><img title="image" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="image" src="http://michaelcrump.net/files/image_thumb_634961831997154398.png" width="583" height="293" /></a></p>    <p>Now that we have a reference to our main project let’s go ahead and add a simple method that we will use with our Unit Test application. </p>    <p>Navigate to your MainPage.xaml.cs in your main project and add the following code snippet under the MainPage constructor. </p>    <pre class="brush: csharp;">public static int AddIntegers(int a int b)  {      return (a + b);  }</pre>    <p>That was real hard wasn’t it? OK this will simply add two numbers and return the value. (I hope you had that part figured out.) </p>    <p>Let’s return to our Unit Test project and creating a new folder called “<strong>UnitTests</strong>” and add a class called “<strong>WP8UnitTest</strong>”. </p>    <p>Drop in the following code snippet (you may have to change your namespace if you didn’t name this project UnitTestWP8App) </p>    <pre class="brush: csharp;">using Microsoft.VisualStudio.TestTools.UnitTesting;  using System;  using System.Linq;    namespace UnitTestWP8App.UnitTests  {      [TestClass]      public class WP8UnitTest      {          [TestMethod]          [Description(&quot;Check to see if MainPage.xaml get instantiated&quot;)]          public void MainPageTest()          {              //Should return true              MyAwesomeWP8App.MainPage MPage=new MyAwesomeWP8App.MainPage();              Assert.IsNotNull(MPage);          }            [TestMethod]          [Description(&quot;Check to see if AddIntegers works as desired&quot;)]          public void AddIntegersTestShouldPass()          {              //Should Pass Since we are using Assert.IsTrue and 2+3=5              var c=MyAwesomeWP8App.MainPage.AddIntegers(2 3);              Assert.IsTrue(c == 5);          }            [TestMethod]          [Description(&quot;Check to see if AddIntegers works as desired&quot;)]          public void AddIntegersTestShouldPass2()          {              //Should Pass since we are using Assert.IsFalse and 2+3 does not equal 7              var c=MyAwesomeWP8App.MainPage.AddIntegers(2 3);              Assert.IsFalse(c == 7);          }      }  }</pre>    <p>From here we have 3 TestMethods that are going to run. </p>    <ul>    <li>The First one just checks to see if the MainPage.xaml gets instantiated in our main application. </li>      <li>The Second one calls our AddIntegers method and adds two numbers and expect the result to be 5. </li>      <li>The Third one calls our AddIntegers method and adds two numbers and expects the result to NOT equal 7. </li>  </ul>    <p>If we run our Unit Test Application now and hit the play button then we can see all three tests passed. </p>    <p><a href="http://michaelcrump.net/files/3_634961832017437648.png"><img title="3" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="3" src="http://michaelcrump.net/files/3_thumb_634961832027735298.png" width="268" height="444" /></a></p>    <p>We can also drill into them and get more details as well as email it or save it to isolated storage. </p>    <p><a href="http://michaelcrump.net/files/4_634961832043181773.png"><img title="4" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="4" src="http://michaelcrump.net/files/4_thumb_634961832051295073.png" width="264" height="437" /></a></p>    <h3>Wrap-up</h3>    <p>I hope this helps you understand Unit Testing in WP8. As always I’m available for any type of help that you may need. You may also download the completed project <a href="http://michaelcrump.net/get/MyAwesomeWP8App.zip" target="_blank">here</a>. </p>
