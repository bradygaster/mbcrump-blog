---
layout: post
title: Building a better MessageBox for WP7 with the help of XNA.
excerpt: 
tags: 
comments: true
---

<p>I’ve recently had the requirement to allow my user to choose between two items in my Windows Phone 7 application. The first way that I thought of tackling this was using the standard MessageBox.Show that is included with the System.Windows class and seeing if the enum provided a way to allow custom text.</p>  <p><a href="http://michaelcrump.net/files/image_634591050994842789.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://michaelcrump.net/files/image_thumb_634591051004202909.png" width="688" height="92" /></a></p>  <p>Unfortunately it did not. As you can see from the image above it only includes an OK and an OKCancel. If we run this application then we get the following:</p>  <p><a href="http://michaelcrump.net/files/image_634591051008258961.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://michaelcrump.net/files/image_thumb_634591051012471015.png" width="240" height="113" /></a></p>  <p>Kinda boring and doesn’t allow any real customization. But what if we wanted to display custom text where the ok and cancel buttons are? What if we wanted our application to look like the following?</p>  <p><a href="http://michaelcrump.net/files/image_634591051017307077.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://michaelcrump.net/files/image_thumb_634591051021987137.png" width="240" height="108" /></a></p>  <p>This is where we could use a little help from XNA libraries.</p>  <p>Go ahead and open your Windows Phone 7 Project and right click on References and select Microsoft.Xna.Framework.GamerServices as shown below.</p>  <p><a href="http://michaelcrump.net/files/SNAGHTML84aa445_634591051031191255.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="SNAGHTML84aa445" border="0" alt="SNAGHTML84aa445" src="http://michaelcrump.net/files/SNAGHTML84aa445_thumb_634591051046167447.png" width="387" height="328" /></a></p>  <p>Now that we have access to the proper library go ahead and add a button and add the following code snippet. (assuming you name it button1 and wired up the event handler)</p>  <pre class="brush: csharp;">private void button1_Click(object sender RoutedEventArgs e)  {      Guide.BeginShowMessageBox(&quot;Sport&quot; &quot;Which sport do you prefer?&quot; new string[] { &quot;Football&quot; &quot;Baseball&quot; } 1 MessageBoxIcon.None                                new AsyncCallback(OnMessageBoxClosed) null);  }    private void OnMessageBoxClosed(IAsyncResult ar)  {      int? buttonIndex = Guide.EndShowMessageBox(ar);      switch (buttonIndex)      {          case 0:              Deployment.Current.Dispatcher.BeginInvoke(() =&gt; ShowMe(&quot;Football&quot;));              break;          case 1:              Deployment.Current.Dispatcher.BeginInvoke(() =&gt; ShowMe(&quot;Baseball&quot;));              break;          default:              break;      }  }    public void ShowMe(string title)  {      PageTitle.Text = title;  }</pre>    <p>In this example I added a Button and am simply changing the PageTitle.Text to be whatever you selected. As you can see this code is pretty simple and the only thing you may be confused about is the Deployment.Current.Dispatcher.BeginInvoke() call. The reason that this is in here is because without it is is an Invalid cross-thread access as shown below.</p>    <p><a href="http://michaelcrump.net/files/image_634591051055371565.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="http://michaelcrump.net/files/image_thumb_634591051078459861.png" width="738" height="329" /></a></p>    <p>&#160;</p>    <p>Thanks again for reading and hopefully this bails someone out like it did for me.</p>    <p><a href="http://feeds.feedburner.com/MichaelCrump"><img alt="alt" src="http://www.feedburner.com/fb/images/pub/feed-icon16x16.png" /></a> <a href="http://feeds.feedburner.com/MichaelCrump">Subscribe to my feed</a></p>    <p><a href="http://twitter.com/mbcrump"><img alt="" src="http://michaelcrump.net/images/geekswithblogs_net/mbcrump/twitter.png" /></a></p>    <div class="addthis_toolbox addthis_default_style "><a class="addthis_button_preferred_1"></a><a class="addthis_button_preferred_2"></a><a class="addthis_button_preferred_3"></a><a class="addthis_button_preferred_4"></a><a class="addthis_button_compact"></a><a class="addthis_counter addthis_bubble_style"></a></div>
